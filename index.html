<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
<<<<<<< Updated upstream
  <title>The Hawk Games — Launching Soon</title>

  <!-- Use the main site stylesheet for variables/typography/base -->
  <link rel="stylesheet" href="app/css/hawk-games.css">

  <!-- Brand fonts (mirrors the app) -->
=======
  <title>The Hawk Games — Competitions</title>

  <!-- Main brand stylesheet -->
  <link rel="stylesheet" href="app/css/hawk-games.css">

  <!-- Fonts to match the app -->
>>>>>>> Stashed changes
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<<<<<<< Updated upstream
  <!-- Optional Spline (leave empty to use PNG logo) -->
  <script type="module" src="https://unpkg.com/@splinetool/viewer@1.9.5/build/spline-viewer.js"></script>

  <style>
    /* =======================
       Landing-only styles
       ======================= */
    :root {
      --gold: var(--primary-gold, #e0a94a);
      --bg: var(--dark-bg, #121212);
      --text: var(--light-white, #f0f0f0);
      --muted: #b9bec7;
      --card-bg: rgba(26,26,26,0.86);
      --border: rgba(224,169,74,0.35);
      --ring: rgba(224,169,74,0.55);
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      color: var(--text);
      background: #0e0f11 url('app/assets/hero-bg.png') center/cover no-repeat fixed;
      font-family: var(--font-body, 'Roboto', system-ui, -apple-system, Segoe UI, Arial);
      overflow-x: hidden;
    }
    body::before{
      content: "";
      position: fixed; inset: 0;
      background:
        radial-gradient(70% 60% at 60% 10%, rgba(0,0,0,.25), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.75));
      pointer-events: none;
      z-index: 0;
    }

    .wrap {
      position: relative;
      z-index: 1;
      width: min(1280px, 92vw);
      margin: 0 auto;
      padding: 12px 0 40px;
    }

    /* Top gold rule (thin) */
    .gold-rule { height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); opacity: .8; }
    .gold-rule.thick { height: 2px; opacity: .9; }

    /* ======= HERO ======= */
    .hero {
      padding: clamp(16px, 3vw, 28px) 0 clamp(24px, 4.2vw, 44px);
      display: grid;
      gap: 20px;
    }
    .brand-row {
      display: flex; align-items: center; justify-content: space-between;
      gap: 16px;
    }
    .brand-left { display: flex; align-items: center; gap: 14px; }
    .brand-left .mini-mark { width: 40px; height: 40px; display:grid; place-items:center;
      border-radius: 12px;
      background: linear-gradient(145deg, rgba(224,169,74,0.22), rgba(224,169,74,0.08));
      border:1px solid rgba(224,169,74,0.25);
      box-shadow: inset 0 0 10px rgba(224,169,74,0.3), 0 6px 18px rgba(0,0,0,0.45);
    }
    .brand-left .site-name { font-family: var(--font-heading, 'Chakra Petch'); font-weight: 700; letter-spacing: .5px; }
    .brand-left .tagline { color: var(--gold); opacity: .95; font-weight: 700; margin-left: 8px; }

    .logo-big {
      display: block;
      margin: clamp(4px, 1vw, 12px) auto;
      width: clamp(260px, 44vw, 520px);
      height: auto;
      filter: drop-shadow(0 16px 48px rgba(0,0,0,.55));
    }
    .spline-holder { width: clamp(260px, 44vw, 520px); height: min(44vh, 360px); margin: 0 auto; border-radius: 20px; overflow: hidden; box-shadow: 0 18px 48px rgba(0,0,0,0.5); }

    .notify { margin: 22px auto 4px; text-align: center; }
    .notify h2 {
      font-family: var(--font-heading, 'Chakra Petch');
      font-size: clamp(18px, 2.4vw, 20px);
      letter-spacing: 2px;
    }
    .form {
      margin: 12px auto 0;
      display: grid;
      grid-template-columns: 1fr 1fr 2fr auto;
      gap: 10px;
      width: min(940px, 96%);
    }
    .form input {
      width: 100%;
      padding: 14px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      color: var(--text);
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
      font-size: 14px;
    }
    .form input:focus {
      border-color: var(--border);
      box-shadow: 0 0 0 3px rgba(224,169,74,0.22);
    }
    .form button {
      padding: 14px 18px;
      border-radius: 12px;
      border: 1px solid rgba(224,169,74,0.45);
      background: linear-gradient(180deg, rgba(224,169,74,0.30), rgba(224,169,74,0.12));
      color: #0e0f11;
      font-weight: 800;
      letter-spacing: .3px;
      cursor: pointer;
      transition: transform .15s ease, box-shadow .2s ease;
      box-shadow: 0 12px 28px rgba(224,169,74,0.24);
    }
    .form button:hover { transform: translateY(-1px); }
    .form .hint { grid-column: 1/-1; color: #a8afbb; font-size: 12px; margin-top: 2px; }

    /* ======= SIDE COPY ======= */
    .side-copy {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(12px, 3vw, 24px);
      align-items: start;
      margin-top: clamp(12px, 2vw, 18px);
    }
    .side-left, .side-right {
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-family: var(--font-heading, 'Chakra Petch');
      color: #dcdfe6;
    }
    .side-left strong, .side-right strong { display:block; color: var(--gold); font-size: clamp(28px, 5vw, 44px); line-height: .95; }
    .side-left small, .side-right small { display:block; font-size: 12px; letter-spacing: 3px; color: #c0c6d2; }

    /* ======= PRIZE GRID ======= */
    .grid {
      margin-top: clamp(18px, 3vw, 28px);
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 16px;
    }
    .card {
      background: var(--card-bg);
      border: 1px solid rgba(224,169,74,0.2);
      border-radius: 14px;
      padding: 14px;
      display: grid;
      grid-template-rows: auto auto;
      gap: 12px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.45);
    }
    .card:hover { border-color: var(--ring); }
    .card .icon {
      height: 62px; display:grid; place-items:center;
      border: 1px dashed rgba(224,169,74,0.28);
      border-radius: 10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    }
    .card h3 {
      font-family: var(--font-heading, 'Chakra Petch');
      font-size: 14px; letter-spacing: .4px;
    }
    .card p { margin-top: 2px; color: #9aa4b3; font-size: 12px; }

    /* ======= RESPONSIVE ======= */
    @media (max-width: 1100px) { .grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 720px)  {
      .brand-row { flex-direction: column; align-items: flex-start; gap: 8px; }
      .form { grid-template-columns: 1fr; }
      .side-copy { grid-template-columns: 1fr; }
      .grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 420px)  { .grid { grid-template-columns: 1fr; } }

    /* Small toast */
    .toast {
      position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%);
      padding: 10px 14px; border-radius: 10px;
      background: rgba(20,20,20,.85);
      border:1px solid rgba(224,169,74,0.35);
      color: var(--text); font-size: 14px;
      box-shadow: 0 12px 28px rgba(0,0,0,.45);
      z-index: 20; display: none;
    }
    .toast.show { display:block; }
  </style>
</head>

<body data-spline-url="">
  <div class="wrap">

    <div class="gold-rule"></div>

    <!-- HERO -->
    <header class="hero">

      <!-- Top tiny brand row -->
      <div class="brand-row">
        <div class="brand-left">
          <div class="mini-mark">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M4 12c5-1 8-5 9-9 3 5 5 7 9 8-4 1-6 3-8 7-2-3-5-5-10-6Z" />
            </svg>
          </div>
          <div class="site-name">THE HAWK</div>
          <div class="tagline">INSTANT CHANGE</div>
        </div>
      </div>

      <!-- Centerpiece logo (Spline or PNG fallback) -->
      <div id="logoSpot">
        <div class="spline-holder" id="splineHolder" hidden>
          <spline-viewer style="width:100%;height:100%;display:block" aria-label="The Hawk Games 3D Logo"></spline-viewer>
        </div>
        <img id="logoImg" class="logo-big" src="app/assets/logo.png" alt="The Hawk Games" />
      </div>

      <!-- Notify form -->
      <section class="notify" aria-label="Notify me">
        <h2>BE THE FIRST TO PLAY</h2>
        <form class="form" id="notifyForm" novalidate>
          <input type="text" name="firstName" placeholder="First Name" autocomplete="given-name" required />
          <input type="text" name="lastName" placeholder="Last Name (Optional)" autocomplete="family-name" />
          <input type="email" name="email" placeholder="Enter your email" autocomplete="email" required />
          <button type="submit" aria-label="Notify me">Notify Me</button>
          <div class="hint">We’ll only email you about launch. No spam, ever.</div>
        </form>
      </section>

      <!-- Side copy -->
      <div class="side-copy">
        <div class="side-left">
          <small>INSTANT</small>
          <strong>WINS</strong>
          <small>&amp; HUGE</small>
          <strong>COMPETITIONS</strong>
        </div>
        <div class="side-right">
          <small>THAT COULD</small>
          <strong>CHANGE</strong>
          <small>YOUR</small>
          <strong>LIFE</strong>
          <small>FOREVER</small>
        </div>
      </div>

      <div class="gold-rule thick"></div>

      <!-- Prize grid -->
      <section class="grid" aria-label="Launch showcase">
        <!-- Card 1 -->
        <article class="card">
          <div class="icon">
            <!-- Console Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="8" width="18" height="8" rx="2"></rect>
              <circle cx="8" cy="12" r="1"></circle>
              <circle cx="16" cy="12" r="1"></circle>
            </svg>
          </div>
          <div>
            <h3>PlayStation 5</h3>
            <p>Opens at launch</p>
          </div>
        </article>

        <!-- Card 2 -->
        <article class="card">
          <div class="icon">
            <!-- Watch Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <rect x="7" y="6" width="10" height="12" rx="2"></rect>
              <rect x="9" y="2" width="6" height="2" rx="1"></rect>
              <rect x="9" y="20" width="6" height="2" rx="1"></rect>
            </svg>
          </div>
          <div>
            <h3>Apple Watch</h3>
            <p>Opens at launch</p>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="card">
          <div class="icon">
            <!-- Golf Clubs Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <path d="M7 20V6l6-3v3L9 8v12"></path>
              <path d="M16 20V9l4-2v2l-2 1v10"></path>
            </svg>
          </div>
          <div>
            <h3>Golf Clubs</h3>
            <p>Opens at launch</p>
          </div>
        </article>

        <!-- Card 4 -->
        <article class="card">
          <div class="icon">
            <!-- Switch Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="6" width="18" height="12" rx="2"></rect>
              <circle cx="8" cy="12" r="1.2"></circle>
              <circle cx="16" cy="12" r="1.2"></circle>
            </svg>
          </div>
          <div>
            <h3>Nintendo Switch</h3>
            <p>Opens at launch</p>
          </div>
        </article>

        <!-- Card 5 -->
        <article class="card">
          <div class="icon">
            <!-- Hot Tub Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <ellipse cx="12" cy="12" rx="8" ry="4"></ellipse>
              <path d="M4 12v3c0 2.2 3.6 4 8 4s8-1.8 8-4v-3"></path>
            </svg>
          </div>
          <div>
            <h3>Hot Tub</h3>
            <p>Opens at launch</p>
          </div>
        </article>

        <!-- Card 6 -->
        <article class="card">
          <div class="icon">
            <!-- Car Icon -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 13l2-5h14l2 5"></path>
              <path d="M5 13h14v5H5z"></path>
              <circle cx="7.5" cy="18" r="1.2"></circle>
              <circle cx="16.5" cy="18" r="1.2"></circle>
            </svg>
          </div>
          <div>
            <h3>Driving Experience</h3>
            <p>Opens at launch</p>
          </div>
        </article>
      </section>

    </header>

  </div>

  <div class="toast" id="toast">Thanks — we’ll notify you at launch.</div>

  <!-- Minimal JS (Spline toggle + form handling with Firestore if available) -->
  <script type="module">
    // If you want to show the 3D Spline logo, set data-spline-url on <body>
    const splineUrl = document.body.dataset.splineUrl;
    const holder = document.getElementById('splineHolder');
    const logoImg = document.getElementById('logoImg');
    if (splineUrl && holder) {
      holder.hidden = false;
      logoImg.hidden = true;
      holder.querySelector('spline-viewer')?.setAttribute('url', splineUrl);
    }

    // Toast helper
    const toast = (msg) => {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 3000);
    };

    // --- Optional: save to Firestore waitlist ---
    const firebaseConfig = {
      apiKey: "AIzaSyCHnYCOB-Y4tA1_ikShsBZJVD0KJfJJMdU",
      authDomain: "the-hawk-games-64239.firebaseapp.com",
      projectId: "the-hawk-games-64239",
      storageBucket: "the-hawk-games-64239.firebasestorage.app",
      messagingSenderId: "391161456812",
      appId: "1:391161456812:web:48f7264720dff9a70dd709",
      measurementId: "G-DGLYCBJLWF"
    };

    const loadFirebase = async () => {
      try {
        const [{ initializeApp }, { getFirestore, collection, addDoc, serverTimestamp }] = await Promise.all([
          import('https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js'),
          import('https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js')
        ]);
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        return { db, collection, addDoc, serverTimestamp };
      } catch (e) {
        console.warn('Firebase unavailable, falling back to localStorage', e);
        return null;
      }
    };

    // Handle form
    const form = document.getElementById('notifyForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const firstName = (formData.get('firstName') || '').toString().trim();
      const lastName  = (formData.get('lastName') || '').toString().trim();
      const email     = (formData.get('email') || '').toString().trim();

      if (!firstName || !email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        toast('Please enter a valid first name and email.');
        return;
      }

      const fb = await loadFirebase();
      try {
        if (fb) {
          const { db, collection, addDoc, serverTimestamp } = fb;
          await addDoc(collection(db, 'waitlist'), {
            firstName, lastName, email,
            createdAt: serverTimestamp(),
            source: 'landing-prelaunch'
          });
        } else {
          const list = JSON.parse(localStorage.getItem('waitlist') || '[]');
          list.push({ firstName, lastName, email, createdAt: Date.now() });
          localStorage.setItem('waitlist', JSON.stringify(list));
        }
        form.reset();
        toast('Thanks — you’re on the launch list.');
      } catch (err) {
        console.error(err);
        toast('Sorry, something went wrong. Try again.');
      }
    });
=======
  <style>
    /* Landing-only scaffolding (keeps brand styles intact) */
    :root{
      --gold: var(--primary-gold, #e0a94a);
      --text: var(--light-white, #f5f7fb);
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: #0d0f12 url('app/assets/hero-bg.png') center/cover no-repeat fixed;
      color: var(--text);
      overflow-x: hidden;
    }
    body::before{
      content:""; position:fixed; inset:0;
      background: radial-gradient(70% 60% at 60% 10%, rgba(0,0,0,.3), transparent 60%),
                  linear-gradient(180deg, rgba(0,0,0,.2), rgba(0,0,0,.6));
      pointer-events:none;
    }
    .container{ width:min(1240px, 92vw); margin:0 auto; padding: clamp(12px, 2.2vw, 24px) 0 40px; }

    /* Brand topper like the mockup */
    .brand-top{ display:flex; align-items:center; gap:12px; padding: 4px 0 12px; }
    .brand-top .name{ font-family: var(--font-heading); font-weight: 700; letter-spacing: 3px; }
    .brand-top .tag{ color: var(--gold); font-weight: 700; letter-spacing: 2px; opacity: .95; }
    .gold-rule{ height:1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); opacity:.8; margin: 8px 0 16px; }

    /* Layout: hero + grids */
    .hero-wrap{ margin-top: 12px; }
    .section{ margin-top: clamp(16px, 3vw, 28px); }

    /* Restore card links to /app paths */
    a.hawk-card, a.hero-competition-card { text-decoration: none; }

    /* Grid wrappers to match app spacing */
    .grid-3{ display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 24px; }
    @media (max-width: 980px){ .grid-3{ grid-template-columns: 1fr 1fr; } }
    @media (max-width: 620px){ .grid-3{ grid-template-columns: 1fr; } }

    /* Hero card full width */
    #hero-competition-section .hero-competition-card{ width: 100%; }

    /* Small helper states */
    .placeholder{ padding: 24px; text-align: center; border:1px dashed rgba(255,255,255,.18); border-radius: 10px; background: rgba(0,0,0,.25); }
    .section-title{ font-family: var(--font-heading); text-transform: uppercase; letter-spacing: 2px; color:#dfe3ea; margin:0 0 10px; }
  </style>
</head>

<body>
  <div class="container">

    <!-- Top bar: logo text + tagline, as per mockup -->
    <div class="brand-top">
      <div class="name">THE HAWK</div>
      <div class="tag">INSTANT CHANGE</div>
    </div>
    <div class="gold-rule"></div>

    <!-- HERO COMP -->
    <section id="hero-competition-section" class="hero-wrap"></section>

    <!-- MAIN COMPS -->
    <section class="section">
      <h3 class="section-title">Main Competitions</h3>
      <div id="main-competition-grid" class="grid-3"></div>
    </section>

    <!-- INSTANT WINS -->
    <section class="section">
      <h3 class="section-title">Instant Wins</h3>
      <div id="instant-win-grid" class="grid-3"></div>
    </section>

    <!-- SPINNER / TOKEN CTA -->
    <section class="section">
      <h3 class="section-title">Token Game</h3>
      <div id="spinner-competition-grid" class="grid-3"></div>
    </section>

  </div>

  <!-- Firebase + Firestore (modular) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getFirestore, collection, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

    // ---- Minimal app init (same project config used across the app) ----
    const firebaseConfig = {
      apiKey: "AIzaSyCHnYCOB-Y4tA1_ikShsBZJVD0KJfJJMdU",
      authDomain: "the-hawk-games-64239.firebaseapp.com",
      projectId: "the-hawk-games-64239",
      storageBucket: "the-hawk-games-64239.firebasestorage.app",
      messagingSenderId: "391161456812",
      appId: "1:391161456812:web:48f7264720dff9a70dd709",
      measurementId: "G-DGLYCBJLWF"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ---- Helpers (mirrors app/js/main.js structure) ----
    function createElement(tag, options = {}, children = []) {
      const el = document.createElement(tag);
      Object.entries(options).forEach(([key, value]) => {
        if (key === 'class') {
          const classes = Array.isArray(value) ? value : String(value).split(' ');
          classes.forEach(c => { if (c) el.classList.add(c); });
        } else if (key === 'textContent') {
          el.textContent = value;
        } else if (key === 'style' && typeof value === 'object') {
          Object.assign(el.style, value);
        } else {
          el.setAttribute(key, value);
        }
      });
      (Array.isArray(children) ? children : [children]).forEach(child => child && el.append(child));
      return el;
    }

    function formatCountdown(ms){
      if (ms <= 0) return "Closed";
      const s = Math.floor(ms/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const ss = s%60;
      if (d>0) return `${d}d ${h}h ${m}m LEFT TO ENTER`;
      if (h>0) return `${h}h ${m}m ${ss}s LEFT TO ENTER`;
      return `${m}m ${ss}s LEFT TO ENTER`;
    }

    function startCountdowns(){
      const els = document.querySelectorAll('[data-end-date]');
      function tick(){
        const now = Date.now();
        els.forEach(el => {
          const end = new Date(el.getAttribute('data-end-date')).getTime();
          el.textContent = formatCountdown(end - now);
        });
      }
      tick();
      setInterval(tick, 1000);
    }

    function createHeroCompetitionCard(comp){
      const progressPercent = Math.min(100, ((comp.ticketsSold || 0) / (comp.totalTickets || 1)) * 100);
      const endDate = comp.endDate ? comp.endDate.toDate() : null;
      const price = comp.ticketTiers?.[0]?.price || 0.00;
      const instantWinBadge = comp.instantWinsConfig?.enabled
        ? createElement('div', { class: 'hawk-card__instant-win-badge', textContent: '⚡ Instant Wins' })
        : null;

      return createElement('a', { href: `/app/competition.html?id=${comp.id}`, class: 'hero-competition-card' }, [
        instantWinBadge,
        createElement('div', { class: 'hero-card-image' }, [
          createElement('img', { src: comp.prizeImage || 'app/assets/spin-wheel-bg.png', alt: comp.title })
        ]),
        createElement('div', { class: 'hero-card-content' }, [
          createElement('span', { class: 'hero-card-tagline', textContent: 'Main Event' }),
          createElement('h2', { class: 'hero-card-title', textContent: comp.title }),
          createElement('div', { class: 'hero-card-timer', 'data-end-date': endDate ? endDate.toISOString() : '', textContent: endDate ? 'Calculating...' : 'Draws Weekly' }),
          createElement('div', { class: 'progress-bar' }, [
            createElement('div', { class: 'progress-bar-fill', style: { width: `${progressPercent}%` } })
          ]),
          createElement('p', { class: 'hawk-card__progress-text', textContent: `${comp.ticketsSold || 0} / ${comp.totalTickets || 0} sold` }),
          createElement('div', { class: 'hero-card-footer' }, [
            createElement('span', { class: 'hawk-card__price', textContent: `£${Number(price).toFixed(2)}` }),
            createElement('span', { class: 'btn', textContent: 'Enter Now' })
          ])
        ])
      ]);
    }

    function createCompetitionCard(comp){
      const progressPercent = Math.min(100, ((comp.ticketsSold || 0) / (comp.totalTickets || 1)) * 100);
      const endDate = comp.endDate ? comp.endDate.toDate() : null;
      const price = comp.ticketTiers?.[0]?.price || 0.00;
      const instantWinBadge = comp.instantWinsConfig?.enabled
        ? createElement('div', { class: 'hawk-card__instant-win-badge', textContent: '⚡ Instant Wins' })
        : null;

      return createElement('a', { href: `/app/competition.html?id=${comp.id}`, class: 'hawk-card' }, [
        instantWinBadge,
        createElement('img', { class: 'hawk-card__image', src: comp.prizeImage || 'app/assets/spin-wheel-bg.png', alt: comp.title }),
        createElement('div', { class: 'hawk-card__content' }, [
          createElement('h3', { class: 'hawk-card__title', textContent: comp.title }),
          createElement('div', { class: 'hawk-card__timer', 'data-end-date': endDate ? endDate.toISOString() : '', textContent: endDate ? 'Calculating...' : 'Draws Weekly' }),
          createElement('div', { class: 'progress-bar' }, [
            createElement('div', { class: 'progress-bar-fill', style: { width: `${progressPercent}%` } })
          ]),
          createElement('div', { class: 'hawk-card__progress-text', textContent: `${comp.ticketsSold || 0} / ${comp.totalTickets || 0} sold` }),
          createElement('div', { class: 'hawk-card__footer' }, [
            createElement('span', { class: 'hawk-card__price', textContent: `£${Number(price).toFixed(2)}` }),
            createElement('span', { class: 'btn', textContent: 'Enter Now' })
          ])
        ])
      ]);
    }

    function createTokenCompetitionCTA(tokenComp){
      // A small CTA card that sends users to tokens/spinner page
      return createElement('a', { href: '/app/instant-games.html', class: 'hawk-card spinner-comp-card' }, [
        createElement('img', { class: 'hawk-card__image', src: tokenComp.prizeImage || 'app/assets/spin-wheel-bg.png', alt: 'Token Game' }),
        createElement('div', { class: 'hawk-card__content' }, [
          createElement('h3', { class: 'hawk-card__title', textContent: tokenComp.title || 'Instant Win Spinner' }),
          createElement('div', { class: 'spinner-comp-prize', innerHTML: `Win up to <strong>${tokenComp?.instantWinsConfig?.topPrize || '£££'}</strong>` }),
          createElement('p', { class: 'spinner-comp-cta-text', textContent: 'Play the odds-based spinner with Spin Tokens earned in comps.' }),
          createElement('div', { class: 'hawk-card__footer' }, [
            createElement('span', { class: 'btn', textContent: 'Play' })
          ])
        ])
      ]);
    }

    async function loadAllCompetitions(){
      const heroContainer = document.getElementById('hero-competition-section');
      const mainGrid     = document.getElementById('main-competition-grid');
      const instantGrid  = document.getElementById('instant-win-grid');
      const spinnerGrid  = document.getElementById('spinner-competition-grid');

      try{
        const q = query(collection(db, "competitions"), where("status","==","live"), orderBy("createdAt","desc"));
        const snap = await getDocs(q);

        if (snap.empty){
          heroContainer.innerHTML = '';
          heroContainer.append(createElement('div', { class: 'placeholder', textContent: 'Launch competitions will appear here.' }));
          mainGrid.innerHTML = '';
          mainGrid.append(createElement('div', { class: 'placeholder', textContent: 'No Main Prize competitions are live right now.' }));
          instantGrid.innerHTML = '';
          instantGrid.append(createElement('div', { class: 'placeholder', textContent: 'No Instant Wins are live right now.' }));
          spinnerGrid.innerHTML = '';
          spinnerGrid.append(createElement('div', { class: 'placeholder', textContent: 'Token game not active yet.' }));
          return;
        }

        let hero = null;
        const mains = [], instants = [], tokens = [];

        snap.forEach(doc => {
          const data = { id: doc.id, ...doc.data() };
          if (data.isHeroComp === true) hero = data;
          else {
            switch (data.competitionType){
              case 'instant': instants.push(data); break;
              case 'token'  : tokens.push(data); break;
              case 'main'   :
              default       : mains.push(data);  break;
            }
          }
        });

        heroContainer.innerHTML = '';
        if (hero) heroContainer.append(createHeroCompetitionCard(hero));

        mainGrid.innerHTML = '';
        if (mains.length) mains.forEach(c => mainGrid.append(createCompetitionCard(c)));
        else mainGrid.append(createElement('div', { class: 'placeholder', textContent: 'No Main Prize competitions are live right now.' }));

        instantGrid.innerHTML = '';
        if (instants.length) instants.forEach(c => instantGrid.append(createCompetitionCard(c)));
        else instantGrid.append(createElement('div', { class: 'placeholder', textContent: 'No Instant Wins are live right now.' }));

        spinnerGrid.innerHTML = '';
        if (tokens.length) spinnerGrid.append(createTokenCompetitionCTA(tokens[0]));
        else spinnerGrid.append(createElement('div', { class: 'placeholder', textContent: 'Token game not active yet.' }));

        startCountdowns();

      } catch (err){
        console.error(err);
        heroContainer.innerHTML = '';
        heroContainer.append(createElement('div', { class: 'placeholder', style: 'color:red', textContent: 'Failed to load competitions.' }));
      }
    }

    loadAllCompetitions();
>>>>>>> Stashed changes
  </script>
</body>
</html>
