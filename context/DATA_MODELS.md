--- START OF FILE DATA_MODELS.md ---
# FIRESTORE DATA MODELS V2 (COMPLIANT)

This document defines the required Firestore data structures for The Hawk Games.

### `competitions` (collection)
- **title** (String)
- **prizeDescription** (String)
- **prizeImage** (String)
- **status** (String: 'live', 'ended', 'drawn')
- **endDate** (Timestamp)
- **ticketsSold** (Number)
- **totalTickets** (Number)
- **cashAlternative** (Number)
- **skillQuestion** (Object: `{ text, answers, correctAnswer }`)
- **ticketTiers** (Array of Objects: `[{ amount, price }]`)
- **userEntryLimit** (Number, Default: 75)
- **fallbackClause** (Object, e.g. `{ type: 'percent', value: 70 }`)
- **instantWinsConfig** (Object, e.g. `{ enabled: true, prizes: [{count: 10, value: 5}], positionsHash: "abc..." }`)
- **winnerId** (String, UID of winner)
- **winnerDisplayName** (String)
- **winningTicketNumber** (Number)
- **drawnAt** (Timestamp)

### `users` (collection)
- **uid** (String)
- **displayName** (String)
- **email** (String)
- **photoURL** (String)
- **isAdmin** (Boolean)
- **entryCount** (Object: `{ [competitionId]: count }`)
- **marketingConsent** (Boolean, Default: false)
- **spinTokens** (Array of Objects: `[{ tokenId, compId, compTitle, earnedAt }]`)

### `competitions/{id}/entries` (sub-collection)
- **userId** (String)
- **userDisplayName** (String)
- **ticketsBought** (Number)
- **ticketStart** (Number)
- **ticketEnd** (Number)
- **enteredAt** (Timestamp)
- **entryType** (String: 'paid', 'free_postal')
- **instantWins** (Array of Objects: `[{ prizeValue, claimedAt }]`)

### `competitions/{id}/instant_wins` (sub-collection)
- This collection is the pre-generated, definitive list of all instant win tickets.
- **ticketNumber** (Number)
- **prizeValue** (Number)
- **claimed** (Boolean, Default: false)
- **claimedBy** (String, UID of winner)
- **claimedAt** (Timestamp)
- **tokenIdUsed** (String)

### `pastWinners` (collection)
- **prizeTitle** (String)
- **prizeImage** (String)
- **winnerId** (String)
- **winnerDisplayName** (String)
- **winnerPhotoURL** (String)
- **winningTicketNumber** (Number)
- **drawDate** (Timestamp)
